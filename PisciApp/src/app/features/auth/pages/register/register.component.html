<div class="background">
  <div class="register-container">
    <h2>Crear usuario</h2>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
      <div class="form-row">
        <!-- üî• Contenedor para nombre -->
        <div class="input-container">
          <input
            type="text"
            placeholder="Tus nombres"
            formControlName="nombre"
          />
          <div
            *ngIf="
              registerForm.get('nombre')?.hasError('required') &&
              registerForm.get('nombre')?.touched
            "
            class="error"
          >
            El nombre es obligatorio.
          </div>
        </div>

        <!-- üî• Contenedor para correo -->
        <div class="input-container">
          <input
            type="email"
            placeholder="tu@correo.com"
            formControlName="correo"
          />
          <div
            *ngIf="
              registerForm.get('correo')?.hasError('required') &&
              registerForm.get('correo')?.touched
            "
            class="error"
          >
            El correo es obligatorio.
          </div>
          <div
            *ngIf="
              registerForm.get('correo')?.hasError('email') &&
              registerForm.get('correo')?.touched
            "
            class="error"
          >
            El correo no es v√°lido.
          </div>
        </div>
      </div>

      <div class="form-row">
        <!-- üî• Contenedor para tel√©fono -->
        <div class="input-container">
          <input
            type="tel"
            placeholder="+57 3006821133"
            formControlName="telefono"
          />
          <div
            *ngIf="
              registerForm.get('telefono')?.hasError('required') &&
              registerForm.get('telefono')?.touched
            "
            class="error"
          >
            El tel√©fono es obligatorio.
          </div>
          <div
            *ngIf="
              registerForm.get('telefono')?.hasError('pattern') &&
              registerForm.get('telefono')?.touched
            "
            class="error"
          >
            El tel√©fono debe tener entre 7 y 15 d√≠gitos (con o sin +).
          </div>
        </div>

        <!-- üî• Contenedor para departamento -->
        <div class="input-container">
          <input
            type="text"
            placeholder="Risaralda"
            formControlName="departamento"
          />
          <div
            *ngIf="
              registerForm.get('departamento')?.hasError('required') &&
              registerForm.get('departamento')?.touched
            "
            class="error"
          >
            El departamento es obligatorio.
          </div>
        </div>
      </div>

      <div class="form-row">
        <!-- üî• Contenedor para ciudad -->
        <div class="input-container">
          <input type="text" placeholder="Pereira" formControlName="ciudad" />
          <div
            *ngIf="
              registerForm.get('ciudad')?.hasError('required') &&
              registerForm.get('ciudad')?.touched
            "
            class="error"
          >
            La ciudad es obligatoria.
          </div>
        </div>
      </div>

      <div class="form-row">
        <!-- üî• Contenedor para contrase√±a -->
        <div class="input-container">
          <input
            type="password"
            placeholder="Crea una contrase√±a"
            formControlName="contrasena"
          />
          <div
            *ngIf="
              registerForm.get('contrasena')?.hasError('required') &&
              registerForm.get('contrasena')?.touched
            "
            class="error"
          >
            La contrase√±a es obligatoria.
          </div>
          <div
            *ngIf="
              registerForm.get('contrasena')?.hasError('pattern') &&
              registerForm.get('contrasena')?.touched
            "
            class="error"
          >
            La contrase√±a debe tener m√≠nimo 8 caracteres, una may√∫scula, una
            min√∫scula, un n√∫mero y un caracter especial.
          </div>
        </div>

        <!-- üî• Contenedor para confirmar contrase√±a -->
        <div class="input-container">
          <input
            type="password"
            placeholder="Confirma tu contrase√±a"
            formControlName="confirmarContrasena"
          />
          <div
            *ngIf="
              registerForm.hasError('passwordsMismatch') &&
              registerForm.get('confirmarContrasena')?.touched
            "
            class="error"
          >
            Las contrase√±as no coinciden.
          </div>
        </div>
      </div>

      <div class="terms">
        <input type="checkbox" formControlName="terms" />
        <label>Acepto los <a href="#">t√©rminos y condiciones</a></label>
        <!-- Error t√©rminos -->
        <div
          *ngIf="
            registerForm.get('terms')?.hasError('required') &&
            registerForm.get('terms')?.touched
          "
          class="error"
        >
          Debes aceptar los t√©rminos y condiciones.
        </div>
      </div>

      <button type="submit" [disabled]="registerForm.invalid || loading">
        {{ loading ? "Guardando..." : "Guardar y continuar" }}
      </button>

      <!-- Error general -->
      <div *ngIf="errorMessage" class="error">{{ errorMessage }}</div>
    </form>

    <a href="/login" class="back-link">Volver al inicio de sesi√≥n</a>
  </div>
</div>
